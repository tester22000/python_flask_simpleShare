{% extends "base.html" %}

{% block title %}QR 코드{% endblock %}

{% block content %}
<div class="container mx-auto p-4 flex flex-col items-center justify-center min-h-screen">
    <div class="bg-white rounded-lg shadow-md p-6 text-center">
        <h1 class="text-2xl font-bold mb-4 text-gray-800">QR 코드로 접속하기</h1>
        
        <div id="qrcode-container" class="my-6"></div>
        
        <p class="text-gray-600 mb-6">스마트폰 카메라로 위 QR 코드를 스캔하면<br>이 앱에 바로 접속할 수 있습니다.</p>
        
        <a href="{{ url_for('routes.index') }}" class="py-2 px-4 rounded-lg bg-gray-300 hover:bg-gray-400 transition-colors">
            뒤로가기
        </a>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
    $(document).ready(function() {
        // 서버의 호스트 주소를 Flask 템플릿 변수로 가져와 QR 코드에 사용
        const appHost = "{{ app_host }}";
        
        if (appHost) {
            new QRCode(document.getElementById("qrcode-container"), {
                text: appHost,
                width: 256,
                height: 256,
                colorDark : "#000000",
                colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.H
            });
        }
    });
</script>
{% endblock %}